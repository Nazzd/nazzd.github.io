<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>react - Nazzd's Blog</title><meta name=author content><meta name=author-link content><meta name=description content="以下是观看尚硅谷React课程所做的笔记。 尚硅谷React React简介 react是什么？ React用于构建用户界面的JS库。是一个将数据渲"><meta name=keywords content="Hugo,FixIt"><meta itemprop=name content="react"><meta itemprop=description content="以下是观看尚硅谷React课程所做的笔记。 尚硅谷React React简介 react是什么？ React用于构建用户界面的JS库。是一个将数据渲"><meta itemprop=datePublished content="2021-01-20T11:13:20+00:00"><meta itemprop=dateModified content="2021-01-20T11:13:20+00:00"><meta itemprop=wordCount content="20052"><meta itemprop=keywords content><meta property="og:title" content="react"><meta property="og:description" content="以下是观看尚硅谷React课程所做的笔记。 尚硅谷React React简介 react是什么？ React用于构建用户界面的JS库。是一个将数据渲"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/react%E5%AD%A6%E4%B9%A0/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-20T11:13:20+00:00"><meta property="article:modified_time" content="2021-01-20T11:13:20+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="react"><meta name=twitter:description content="以下是观看尚硅谷React课程所做的笔记。 尚硅谷React React简介 react是什么？ React用于构建用户界面的JS库。是一个将数据渲"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://example.org/posts/react%E5%AD%A6%E4%B9%A0/><link rel=prev href=http://example.org/posts/prettier%E9%85%8D%E7%BD%AE/><link rel=next href=http://example.org/posts/%E8%A7%84%E8%8C%83%E6%96%87%E6%A1%A3/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"react","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/react%E5%AD%A6%E4%B9%A0\/"},"genre":"posts","wordcount":20052,"url":"http:\/\/example.org\/posts\/react%E5%AD%A6%E4%B9%A0\/","datePublished":"2021-01-20T11:13:20+00:00","dateModified":"2021-01-20T11:13:20+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"作者"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Nazzd's Blog"><span class=header-title-pre><i class='fas fa-blog'></i></span><span class=header-title-text> Nazzd's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Nazzd's Blog"><span class=header-title-pre><i class='fas fa-blog'></i></span><span class=header-title-text> Nazzd's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>react</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img class="lazyload avatar" src=/svg/loading.min.svg data-src=/images/avatar.jpeg data-srcset="/images/avatar.jpeg, /images/avatar.jpeg 1.5x, /images/avatar.jpeg 2x" data-sizes=auto alt=Anonymous title=Anonymous>&nbsp;Anonymous</span></span></div><div class=post-meta-line><span title="2021-01-20 11:13:20"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2021-01-20>2021-01-20</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> 约 20052 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> 预计阅读 41 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#react-基础案例>React 基础案例</a></li><li><a href=#三个api>三个API</a></li><li><a href=#jsx基础语法>JSX基础语法</a></li><li><a href=#两种创建虚拟dom的方式>两种创建虚拟DOM的方式</a></li><li><a href=#渲染列表>渲染列表</a></li></ul><ul><li><a href=#函数式组件>函数式组件</a></li><li><a href=#class组件>Class组件</a></li><li><a href=#组件案例>组件案例</a></li></ul><ul><li><a href=#state>state</a></li><li><a href=#props>Props</a></li><li><a href=#refs>Refs</a></li></ul><ul><li><a href=#旧>（旧）</a></li><li><a href=#新>（新）</a></li></ul><ul><li><a href=#创建项目并启动>创建项目并启动</a></li><li><a href=#项目的目录结构>项目的目录结构</a></li><li><a href=#第一个脚手架应用>第一个脚手架应用</a></li><li><a href=#样式冲突>样式冲突</a></li></ul><ul><li><a href=#spa>SPA</a></li><li><a href=#什么是路由>什么是路由</a></li><li><a href=#react-router-dom>react-router-dom</a></li><li><a href=#样式错误>样式错误</a></li><li><a href=#模糊匹配和精准匹配>模糊匹配和精准匹配</a></li><li><a href=#初始化路由>初始化路由</a></li><li><a href=#嵌套路由>嵌套路由</a></li><li><a href=#向路由组件传递参数>向路由组件传递参数</a></li><li><a href=#编程式路由导航>编程式路由导航</a></li><li><a href=#withrouter最用>withRouter最用</a></li><li><a href=#browserrouter-和hashrouter区别>BrowserRouter 和HashRouter区别</a></li></ul><ul><li><a href=#redux是什么>redux是什么</a></li><li><a href=#什么情况下需要使用redux>什么情况下需要使用redux</a><ul><li><a href=#redux的三个核心概念>redux的三个核心概念</a></li><li><a href=#react-redux使用>react-redux使用</a></li><li><a href=#扩展点>扩展点</a></li></ul></li></ul></nav></div></div><div class=content id=content><blockquote><p>以下是观看尚硅谷React课程所做的笔记。</p><p><a href="https://www.bilibili.com/video/BV1wy4y1D7JT?p=43&amp;t=5" target=_blank rel="external nofollow noopener noreferrer">尚硅谷React</a></p></blockquote><h1 id=react简介>React简介</h1><p><strong>react是什么？</strong></p><p>React用于构建用户界面的JS库。是一个将数据渲染为HTML视图的开源JS库。</p><p><strong>为什么学？</strong></p><p>1.原生JS操作DOM繁琐，效率低</p><p>2.使用JS直接操作DOM,浏览器会进行大量的重绘重排</p><p>3.原生JS没有组件化编码方案，代码复用低</p><h1 id=react入门>React入门</h1><h2 id=react-基础案例>React 基础案例</h2><p>1.先引入以下2个包：</p><p><em><strong>react.development.js</strong></em></p><ul><li>react 是react核心库，只要使用react就必须要引入</li><li>下载地址：https://unpkg.com/react@18.0.0/umd/react.development.js</li></ul><p><em><strong>react-dom.development.js</strong></em></p><ul><li>react-dom 是react的dom包，使用react开发web应用时必须引入</li><li>下载地址：https://unpkg.com/react-dom@18.0.0/umd/react-dom.development.js</li></ul><p>【先引入react.development.js，后引入react-dom.development.js】</p><p>2.创建一个容器</p><p>3.创建虚拟DOM，渲染到容器中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;zh&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1.0&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Document<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;./script/react.development.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;./script/react-dom.development.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;root&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>       <span class=kr>const</span> <span class=nx>div</span> <span class=o>=</span>  <span class=nx>React</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>,{},</span><span class=s2>&#34;我是一个div&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=kr>const</span> <span class=nx>root</span> <span class=o>=</span> <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>createRoot</span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;root&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>       <span class=nx>root</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=nx>div</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=三个api>三个API</h2><ul><li><p>React.createElement()</p><ul><li><code>React.createElement(type, [props], [...children])</code></li><li>用来创建React元素</li><li>React元素无法修改</li></ul></li><li><p>ReactDOM.createRoot()</p><ul><li><code>createRoot(container, [options])</code></li><li>用来创建React的根容器，容器用来放置React元素</li></ul></li><li><p>root.render()</p><ul><li><code>root.render(element)</code></li><li>当首次调用时，容器节点里的所有 DOM 元素<code>都会</code>被替换，后续的调用则会使用 React 的 DOM 差分算法（DOM diffing algorithm）进行高效的更新。</li><li>不会修改容器节点（只会修改容器的子节点）。可以在不覆盖现有子节点的情况下，将组件插入已有的 DOM 节点中。</li></ul></li></ul><h2 id=jsx基础语法>JSX基础语法</h2><p>​ JSX 是 JavaScript 的语法扩展，JSX 使得我们可以以类似于 HTML 的形式去使用 JS。JSX便是React中声明式编程的体现方式。声明式编程，简单理解就是以结果为导向的编程。使用JSX将我们所期望的网页结构编写出来，然后React再根据JSX自动生成JS代码。所以我们所编写的JSX代码，最终都会转换为以调用<code>React.createElement()</code>创建元素的代码。</p><p><em><strong>注意事项：</strong></em></p><p>1.定义虚拟DOM，不能使用""</p><p>2.可以使用{}插入JS表达式。（表达式：有返回值的语句。JSX也是表达式）</p><p>3.属性正常写（class使用className，style必须用{},且名称为驼峰式->style={{backgroundColor:&ldquo;yellow&rdquo;}}）</p><p>4.布尔类型、Null 以及 Undefined 将会忽略</p><p>5.不能有多个根标签，只能有一个根标签</p><p>6.标签必须正常闭合</p><p>7.html标签小写开头，React组件大写开头</p><p>PS: 由于JSX最终需要转换为JS代码执行，所以浏览器并不能正常识别JSX，所以当我们在浏览器中直接使用JSX时，还必须引入babel来完成对代码的编译。</p><pre tabindex=0><code>babel下载地址：https://unpkg.com/babel-standalone@6/babel.min.js
</code></pre><p>实例如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;zh&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Hello React<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;script/react.development.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;script/react-dom.development.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;script/babel.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;app&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>h1</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>h1</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span><span class=nx>backgroundColor</span><span class=o>:</span><span class=nx>yellow</span><span class=p>}}</span><span class=o>&gt;</span><span class=nx>Hello</span> <span class=nx>React</span><span class=o>&lt;</span><span class=err>/h1&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=nx>h1</span><span class=p>,</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#app&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=两种创建虚拟dom的方式>两种创建虚拟DOM的方式</h2><p><strong>1.使用JSX创建虚拟DOM</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl> <span class=kr>const</span> <span class=nx>VDOM</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>id </span><span class=o>=</span> <span class=p>{</span><span class=nx>MyId</span><span class=p>.</span><span class=nx>toLocaleUpperCase</span><span class=p>()}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>span</span> <span class=na>className </span><span class=o>=</span> <span class=s>&#34;sss&#34;</span> <span class=na>style </span><span class=o>=</span> <span class=p>{{</span><span class=nx>fontSize</span><span class=o>:</span><span class=s1>&#39;50px&#39;</span><span class=p>}}&gt;</span><span class=nx>sss</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></div><p>这个在上面的案例中已经演示过了 ，下面看看另外一种创建虚拟DOM的方式</p><p><strong>2.使用JS创建虚拟DOM</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 1.创建虚拟DOM[在这使用了js的语法]React.createElement(标签,标签属性,内容)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>VDOM</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;h1&#39;</span><span class=p>,{</span><span class=nx>id</span><span class=o>:</span><span class=s2>&#34;title&#34;</span><span class=p>},</span><span class=s2>&#34;nihao&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// 参数： 1. 元素名（组件名）2.元素中的属性 3.元素的子元素（内容）
</span></span></span></code></pre></div><p>使用JS和JSX都可以创建虚拟DOM，但是可以看出JS创建虚拟DOM比较繁琐，尤其是标签如果很多的情况下，所以还是比较推荐使用JSX来创建。</p><h2 id=渲染列表>渲染列表</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>students</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;孙悟空&#39;</span><span class=p>,</span> <span class=s1>&#39;猪八戒&#39;</span><span class=p>,</span> <span class=s1>&#39;沙和尚&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>items</span> <span class=o>=</span> <span class=nx>students</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>item</span> <span class=p>=&gt;</span> <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>item</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ele</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>items</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//输出一个列表时，无论我们使用的for循环还是map()方法，当你打开控制台时你一定会看到一行红色的内容，它大概内容是：Warning: Each child in a list should have a unique “key” prop.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>students</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;孙悟空&#39;</span><span class=p>,</span> <span class=s1>&#39;猪八戒&#39;</span><span class=p>,</span> <span class=s1>&#39;沙和尚&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ele</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>students</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>item</span> <span class=p>=&gt;</span> <span class=o>&lt;</span><span class=nx>li</span> <span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>item</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>item</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;)}&lt;/ul&gt;</span>
</span></span></code></pre></div><h1 id=组件>组件</h1><p>当应用是以多组件的方式实现，这个应用就是一个组件化的应用</p><blockquote><p><strong>注意：</strong> 组件名称必须以大写字母开头。</p><p>React 会将以小写字母开头的组件视为原生 DOM 标签。例如，&lt; div /><code>代表 HTML 的 div 标签，而</code>&lt; Weclome /> 则代表一个组件，并且需在作用域内使用 <code>Welcome</code></p><p>传递的参数，不能在组件中改动</p></blockquote><h2 id=函数式组件>函数式组件</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>//1.先创建函数，函数可以有参数，也可以没有，但是必须要有返回值 返回一个虚拟DOM
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>Welcome</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//2.进行渲染
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>Render</span><span class=p>(&lt;</span><span class=nt>Welcom</span> <span class=na>name </span><span class=o>=</span> <span class=s>&#34;ss&#34;</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>让我们来回顾一下这个例子中发生了什么：</p><ol><li>我们调用 <code>ReactDOM.render()</code> 函数，并传入 <code>&lt;Welcome name="ss" /></code> 作为参数。</li><li>React 调用 <code>Welcome</code> 组件，并将 <code>{name: 'ss'}</code> 作为 props 传入。</li><li><code>Welcome</code> 组件将 <code>Hello, ss</code> 元素作为返回值。</li><li>React DOM 将 DOM 高效地更新为 <code>Hello, ss</code>。</li></ol><h2 id=class组件>Class组件</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>//必须继承React.Component
</span></span></span><span class=line><span class=cl><span class=c1>//然后重写Render()方法，该方法一定要有返回值，返回一个虚拟DOM
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Welcome</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//渲染 【这个跟之前也是一样的】
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>Render</span><span class=p>(&lt;</span><span class=nt>Welcom</span> <span class=na>name </span><span class=o>=</span> <span class=s>&#34;ss&#34;</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>执行过程：</p><p>​ 1.React解析组件标签，找到相应的组件</p><p>​ 2.发现组件是类定义的，随后new出来的类的实例，并通过该实例调用到原型上的render方法</p><p>​ 3.将render返回的虚拟DOM转化为真实的DOM,随后呈现在页面中</p><h2 id=组件案例>组件案例</h2><p>我们发现组件是可以包含中使用的， 而且如果创建的数组，必须要代一个key。数组元素中使用的 key 在其兄弟节点之间应该是独一无二的。然而，它们不需要是全局唯一的。当我们生成两个不同的数组时，我们可以使用相同的 key 值</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//创建一个组件&lt;li&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>function</span> <span class=nx>GetLi</span><span class=p>(</span><span class=nx>props</span><span class=p>){</span>      
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=nx>props</span><span class=p>.</span><span class=nx>value</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 1.创建类式组件&lt;ul&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>class</span> <span class=nx>MyComponent</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>arr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kd>let</span> <span class=nx>com</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>arr</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>item</span><span class=p>,</span><span class=nx>index</span><span class=p>)=&gt;</span>
</span></span><span class=line><span class=cl>                     <span class=c1>//在这个地方包含了GetLi这个组件，【注意不能用{}】
</span></span></span><span class=line><span class=cl><span class=c1></span>                     <span class=c1>//因为这个是一个列表，所以必须传递一个key【独一无二的Key】
</span></span></span><span class=line><span class=cl><span class=c1></span>                     <span class=c1>//key 帮助 React 识别哪些元素改变了，比如被添加或删除。
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=p>&lt;</span><span class=nt>GetLi</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=nx>item</span><span class=p>}</span> <span class=na>key </span><span class=o>=</span> <span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>com</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;{</span><span class=nx>com</span><span class=p>}&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>num</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1>//2.渲染组件
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>MyComponent</span>  <span class=na>arr</span><span class=o>=</span><span class=p>{</span><span class=nx>num</span><span class=p>}/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h1 id=组件实例的三大属性>组件实例的三大属性</h1><h2 id=state>state</h2><p>我们都说React是一个状态机，体现是什么地方呢，就是体现在state上，通过与用户的交互，实现不同的状态，然后去渲染UI,这样就让用户的数据和界面保持一致了。state是组件的私有属性。</p><p>在React中，更新组件的state，结果就会重新渲染用户界面(不需要操作DOM),一句话就是说，用户的界面会随着状态的改变而改变。</p><p>state是组件对象最重要的属性，值是对象（可以包含多个key-value的组合）</p><p><strong>案例</strong>：</p><p>1.需求：页面显示【今天天气很炎热】，鼠标点击文字的时候，页面更改为【今天天气很凉爽】</p><p>核心代码如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>准备好容器</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;test&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--</span> <span class=nx>引入依赖</span> <span class=p>,</span><span class=nx>引入的时候</span><span class=err>，</span><span class=nx>必须就按照这个步骤</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/react.development.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/react-dom.development.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/babel.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--</span><span class=nx>这里使用了js来创建虚拟DOM</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c1>//1.创建组件
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>class</span> <span class=nx>St</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>){</span>
</span></span><span class=line><span class=cl>                <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>//先给state赋值
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>isHot</span><span class=o>:</span><span class=kc>true</span><span class=p>,</span><span class=nx>win</span><span class=o>:</span><span class=s2>&#34;ss&#34;</span><span class=p>};</span>
</span></span><span class=line><span class=cl>                <span class=c1>//找到原型的dem，根据dem函数创建了一个dem1的函数，并且将实例对象的this赋值过去
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>this</span><span class=p>.</span><span class=nx>dem1</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>dem</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>//render会调用1+n次【1就是初始化的时候调用的，n就是每一次修改state的时候调用的】
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>render</span><span class=p>(){</span> <span class=c1>//这个This也是实例对象
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//如果加dem()，就是将函数的回调值放入这个地方
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//this.dem这里面加入this，并不是调用，只不过是找到了dem这个函数，在调用的时候相当于直接调用，并不是实例对象的调用
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>onClick </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>dem1</span><span class=p>}&gt;</span><span class=nx>今天天气很</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=o>?</span><span class=s2>&#34;炎热&#34;</span><span class=o>:</span><span class=s2>&#34;凉爽&#34;</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>    
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>//通过state的实例调用dem的时候，this就是实例对象
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>dem</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>state</span> <span class=o>=</span>  <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                 <span class=c1>//状态中的属性不能直接进行更改，需要借助API
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// this.state.isHot = !isHot; 错误
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//必须使用setState对其进行修改，并且这是一个合并
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>isHot</span><span class=o>:!</span><span class=nx>state</span><span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 2.渲染，如果有多个渲染同一个容器，后面的会将前面的覆盖掉
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>St</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>需要注意的是：</p><p>1.组件的构造函数，必须要传递一个props参数</p><p>2.特别关注this【重点】，类中所有的方法局部都开启了严格模式，如果直接进行调用，this就是undefined</p><p>3.想要改变state,需要使用setState进行修改，如果只是修改state的部分属性，则不会影响其他的属性，这个只是合并并不是覆盖。</p><p>this.setState()，该方法接收两种参数：对象或函数。</p><ol><li>对象：即想要修改的state</li><li>函数：接收两个函数，第一个函数接受两个参数，第一个是当前state，第二个是当前props，该函数返回一个对象，和直接传递对象参数是一样的，就是要修改的state；第二个函数参数是state改变后触发的回调</li></ol><p>在此还需要注意的是，setState有异步更新和同步更新两种形式，那么什么时候会同步更新，什么时候会异步更新呢？</p><p><strong>React控制之外的事件中调用setState是同步更新的。比如原生js绑定的事件，setTimeout/setInterval等</strong>。</p><p><strong>大部分开发中用到的都是React封装的事件，比如onChange、onClick、onTouchMove等，这些事件处理程序中的setState都是异步处理的。</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>//1.创建组件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>St</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//可以直接对其进行赋值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>isHot</span><span class=o>:</span><span class=mi>10</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>(){</span> <span class=c1>//这个This也是实例对象
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>onClick </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>dem</span><span class=p>}&gt;</span><span class=nx>点击事件</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//箭头函数 [自定义方法---&gt;要用赋值语句的形式+箭头函数]，箭头函数本身没有this，使用的是它外层的this，也就是St实例本身
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>dem</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//修改isHot
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span> <span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>1</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上面的案例中预期setState使得isHot变成了11，输出也应该是11。然而在控制台打印的却是10，也就是并没有对其进行更新。这是因为异步的进行了处理，在输出的时候还没有对其进行处理。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>componentDidMount</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,()=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>1</span><span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>但是通过这个原生JS的，可以发现，控制台打印的就是11，也就是已经对其进行了处理。也就是进行了同步的更新。</p><p><strong>React怎么调用同步或者异步的呢？</strong></p><p>在 React 的 setState 函数实现中，会根据一个变量 isBatchingUpdates 判断是直接更新 this.state 还是放到队列中延时更新，而 isBatchingUpdates 默认是 false，表示 setState 会同步更新 this.state；但是，有一个函数 batchedUpdates，该函数会把 isBatchingUpdates 修改为 true，而当 React 在调用事件处理函数之前就会先调用这个 batchedUpdates将isBatchingUpdates修改为true，这样由 React 控制的事件处理过程 setState 不会同步更新 this.state。</p><p><strong>如果是同步更新，每一个setState对调用一个render，并且如果多次调用setState会以最后调用的为准，前面的将会作废；如果是异步更新，多个setSate会统一调用一次render</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>dem</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>isHot</span><span class=o>:</span>  <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>cont</span><span class=o>:</span><span class=mi>444</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    	<span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>isHot</span><span class=o>:</span>  <span class=mi>888</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>cont</span><span class=o>:</span><span class=mi>888</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上面的最后会输出：isHot是888，cont是888</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=nx>dem</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                <span class=p>})</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                <span class=p>})</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>isHot</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span> <span class=o>+</span> <span class=mi>888</span>
</span></span><span class=line><span class=cl>                <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span></code></pre></div><p>初始isHot为10，最后isHot输出为898，也就是前面两个都没有执行。</p><p>**注意！！这是异步更新才有的，如果同步更新，每一次都会调用render，这样每一次更新都会 **</p><p><strong>简化版本：</strong></p><p>1.state的赋值可以不再构造函数中进行</p><p>2.使用了箭头函数，将this进行了改变</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>准备好容器</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;test&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--</span> <span class=nx>引入依赖</span> <span class=p>,</span><span class=nx>引入的时候</span><span class=err>，</span><span class=nx>必须就按照这个步骤</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/react.development.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/react-dom.development.js&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../js/babel.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=kr>class</span> <span class=nx>St</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//可以直接对其进行赋值
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>isHot</span><span class=o>:</span><span class=kc>true</span><span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=nx>render</span><span class=p>(){</span> <span class=c1>//这个This也是实例对象
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>onClick </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>dem</span><span class=p>}&gt;</span><span class=nx>今天天气很</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=o>?</span><span class=s2>&#34;炎热&#34;</span><span class=o>:</span><span class=s2>&#34;凉爽&#34;</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>    
</span></span><span class=line><span class=cl>                <span class=c1>//或者使用{()=&gt;this.dem()也是可以的}
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>//箭头函数 [自定义方法---&gt;要用赋值语句的形式+箭头函数]
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>dem</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>state</span> <span class=o>=</span>  <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isHot</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>isHot</span><span class=o>:!</span><span class=nx>state</span><span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>St</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>));</span>       
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>如果想要在调用方法的时候传递参数，有两个方法：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>deleteRow</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>e</span><span class=p>)}&gt;</span><span class=nx>Delete</span> <span class=nx>Row</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>deleteRow</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>id</span><span class=p>)}&gt;</span><span class=nx>Delete</span> <span class=nx>Row</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>上述两种方式是等价的，分别通过<a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions target=_blank rel="external nofollow noopener noreferrer">箭头函数</a>和 <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind target=_blank rel="external nofollow noopener noreferrer"><code>Function.prototype.bind</code></a> 来实现。</p><p>在这两种情况下，React 的事件对象 <code>e</code> 会被作为第二个参数传递。如果通过箭头函数的方式，事件对象必须显式的进行传递，而通过 <code>bind</code> 的方式，事件对象以及更多的参数将会被隐式的进行传递。</p><h2 id=props>Props</h2><p>Props主要用来传递数据，比如组件之间进行传值</p><p>基本使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id </span><span class=o>=</span> <span class=s>&#34;div&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>class</span> <span class=nx>Person</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//接受数据并显示
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>age</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>sex</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//传递数据
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>Person</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;tom&#34;</span> <span class=na>age </span><span class=o>=</span> <span class=s>&#34;41&#34;</span> <span class=na>sex</span><span class=o>=</span><span class=s>&#34;男&#34;</span><span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>如果传递的数据是一个对象，可以更加简便的使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>class</span> <span class=nx>Person</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>age</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>sex</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=p>{</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;张三&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=s2>&#34;18&#34;</span><span class=p>,</span><span class=nx>sex</span><span class=o>:</span><span class=s2>&#34;女&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>Person</span> <span class=p>{</span><span class=na>...p</span><span class=p>}/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>&mldr; 这个符号恐怕都不陌生，这个是一个展开运算符，主要用来展开数组，如下面这个例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr1</span> <span class=o>=</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>arr2</span> <span class=o>=</span> <span class=p>[...</span><span class=nx>arr</span><span class=p>,...</span><span class=nx>arr1</span><span class=p>];</span>  <span class=c1>//arr2 = [1,2,,3,4,5,6]
</span></span></span></code></pre></div><p>但是他还有其他的用法：</p><p>1.复制一个对象给另一个对象{&mldr;对象名}。此时这两个对象并没有什么联系了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p1</span> <span class=o>=</span> <span class=p>{</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;张三&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=s2>&#34;18&#34;</span><span class=p>,</span><span class=nx>sex</span><span class=o>:</span><span class=s2>&#34;女&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>p2</span> <span class=o>=</span> <span class=p>{...</span><span class=nx>p1</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>p1</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;sss&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p2</span><span class=p>)</span>  <span class=c1>//{name:&#34;张三&#34;,age:&#34;18&#34;,sex:&#34;女&#34;}
</span></span></span></code></pre></div><p>2.在复制的时候，合并其中的属性</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl> <span class=kr>const</span> <span class=nx>p1</span> <span class=o>=</span> <span class=p>{</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;张三&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=s2>&#34;18&#34;</span><span class=p>,</span><span class=nx>sex</span><span class=o>:</span><span class=s2>&#34;女&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=kr>const</span> <span class=nx>p2</span> <span class=o>=</span> <span class=p>{...</span><span class=nx>p1</span><span class=p>,</span><span class=nx>name</span> <span class=o>:</span> <span class=s2>&#34;111&#34;</span><span class=p>,</span><span class=nx>hua</span><span class=o>:</span><span class=s2>&#34;ss&#34;</span><span class=p>};</span>
</span></span><span class=line><span class=cl> <span class=nx>p1</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;sss&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p2</span><span class=p>)</span>  <span class=c1>//{name: &#34;111&#34;, age: &#34;18&#34;, sex: &#34;女&#34;,hua:&#34;ss&#34;}
</span></span></span></code></pre></div><p><strong>注意！！</strong> <strong>{&mldr;P}并不能展开一个对象</strong></p><p><strong>props传递一个对象，是因为babel+react使得{..p}可以展开对象，但是只有在标签中才能使用</strong></p><p><strong>对于props限制</strong></p><p>很多时候都想要传递的参数进行相应的限制，比如：限制传递参数的类型，参数的默认值等等</p><p>react对此提供了相应的解决方法：</p><ul><li>propTypes:类型检查，还可以限制不能为空</li><li>defaultProps：默认值</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>// 需要引入prop-types.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/babel&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>class</span> <span class=nx>Person</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=c1>//props是只读的
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>age</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>sex</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>//对组件的属性对其进行限制
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>static</span> <span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span> <span class=c1>//限定name是string类型，并且必须要传递
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>sex</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>  <span class=c1>//限定sex是string类型
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>speak</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>func</span>   <span class=c1>//限定speak是function类型
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>//指定默认的标签属性
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>static</span> <span class=nx>defaultProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>sex</span><span class=o>:</span><span class=s2>&#34;不男不女&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>age</span><span class=o>:</span><span class=mi>18</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>   
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  			<span class=c1>//对组件的属性对其进行限制
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Person</span><span class=p>.</span><span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span> <span class=c1>//限定name是string类型，并且必须要传递
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>sex</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>  <span class=c1>//限定sex是string类型
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>speak</span><span class=o>:</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>func</span>   <span class=c1>//限定speak是function类型
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>//指定默认的标签属性
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>Person</span><span class=p>.</span><span class=nx>defaultProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>sex</span><span class=o>:</span><span class=s2>&#34;不男不女&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>age</span><span class=o>:</span><span class=mi>18</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=c1>//在js中可以使用{...p}来复制一个对象，但是这个地方并不是复制对象，而是babel+react通过展开运算符，展开了一个对象
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//但是只能在标签中进行使用
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//const p = {name:&#34;张三&#34;,age:&#34;18&#34;,sex:&#34;女&#34;}   {14}就代表的是数值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//ReactDOM.render(&lt;Person {...p}/&gt;,document.getElementById(&#34;div&#34;));
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>Person</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;sss&#34;</span> <span class=na>age </span><span class=o>=</span> <span class=p>{</span><span class=mi>14</span><span class=p>}</span> <span class=na>speak</span><span class=o>=</span><span class=s>&#34;8&#34;</span><span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>speak</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;这个是一个函数&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p><strong>函数式组件的使用</strong>：</p><p>函数在使用props的时候，是作为参数进行使用的(props)；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Person</span><span class=p>(</span><span class=nx>props</span><span class=p>){</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=nx>props</span><span class=p>.</span><span class=nx>age</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;{</span><span class=nx>props</span><span class=p>.</span><span class=nx>sex</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><h2 id=refs>Refs</h2><p>Refs 提供了一种方式，允许我们访问 DOM 节点或在 render 方法中创建的 React 元素。</p><p>Refs主要提供了三种方式：</p><p><strong>1.字符串形式</strong></p><p>在想要获取到一个DOM节点，可以直接在这个节点上添加ref属性。利用该属性进行获取该节点的值。</p><p>案例：给需要的节点添加ref属性，此时该实例对象的refs上就会有这个值。就可以利用实例对象的refs获取已经添加节点的值</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;dian&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;点击弹出&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=nx>inputBlur</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=nx>alert</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>refs</span><span class=p>.</span><span class=nx>shiqu</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></div><p><strong>2.回调形式</strong></p><p>回调形式会在ref属性中添加一个回调函数。将该DOM作为参数传递过去。</p><p>如：ref里面就是一个回调函数，self就是该input标签。然后在将该DOM元素赋值给实例对象中的一个属性</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>self</span> <span class=p>=&gt;{</span> <span class=k>this</span><span class=p>.</span><span class=nx>dian</span> <span class=o>=</span> <span class=nx>self</span><span class=p>;</span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>self</span><span class=p>)}}</span>  <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;点击弹出&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>也可以将函数提取出来，在ref中进行调用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>isRef</span> <span class=o>=</span> <span class=p>(</span><span class=nx>self</span><span class=p>)</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>dian</span> <span class=o>=</span> <span class=nx>self</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>isRef</span><span class=p>}</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;点击弹出&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p><strong>3.API形式</strong></p><p>React其实已经给我们提供了一个相应的API，他会自动的将该DOM元素放入实例对象中</p><p>如下：依旧先在DOM元素中添加一个ref元素</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>{</span><span class=cm>/*&lt;input ref={this.容器名称} type=&#34;text&#34; placeholder=&#34;点击弹出&#34; /&gt;*/</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>MyRef</span><span class=p>}</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;点击弹出&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>MyRef1</span><span class=p>}</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;点击弹出&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>通过API，创建React的容器，相当于省略了回调的中间环节。但是这个容器是专门专用的，所以每一个ref都需要创建这个。该API会将DOM元素赋值给实例对象的名称为容器名称的属性的current【这个current是固定的】</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>{</span><span class=cm>/*容器名称 = React.createRef()*/</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>MyRef</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>MyRef1</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span></code></pre></div><p>然后就可以使用了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>btnOnClick</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//创建之后，将自身节点，传入current中
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>MyRef</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>官方提示我们不要过度的使用ref，如果发生时间的元素刚好是需要操作的元素，就可以使用事件去替代。</strong></p><h1 id=react事件>React事件</h1><p>（1）React的事件是通过onXxx属性指定事件处理函数</p><p>​ React使用的都是自定义（合成）事件，而不是使用的原生DOM事件 &mdash; 为了更好的兼容性</p><p>​ React中的事件是通过事件委托方式处理的（委托给我组件最外层的元素）&mdash; 为了高效</p><p>（2）通过event.target得到发生事件的Dom元素对象&mdash;不要过度使用ref</p><p>比如：</p><p>先声明一个事件，然后在根据事件创建相应的函数，根据事件的event参数，将DOM元素获取到。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>onChange</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>saveName</span><span class=p>}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;text&#34;</span> <span class=na>name </span><span class=o>=</span><span class=s>&#34;username&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>saveName</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></div><p><strong>受控和非受控组件</strong></p><p>先来说说受控组件：</p><p>使 React 的 state 成为“唯一数据源”。渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做“受控组件”。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>saveName</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>name</span><span class=o>:</span><span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>savePwd</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>pwd</span><span class=o>:</span><span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>form</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;http://www.baidu.com&#34;</span> <span class=na>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>login</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>用户名</span><span class=err>：</span><span class=p>&lt;</span><span class=nt>input</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span> <span class=na>onChange</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>saveName</span><span class=p>}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;text&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>密码</span><span class=p>&lt;</span><span class=nt>input</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>pwd</span><span class=p>}</span> <span class=na>onChange</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>savePwd</span><span class=p>}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;password&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span><span class=nx>登录</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>由于在表单元素上设置了 <code>value</code> 属性，因此显示的值将始终为 <code>this.state.value</code>，这使得 React 的 state 成为唯一数据源。由于 <code>onchange</code> 在每次按键时都会执行并更新 React 的 state，因此显示的值将随着用户输入而更新。</p><p>对于受控组件来说，输入的值始终由 React 的 state 驱动。</p><p>非受控组件：</p><p>非受控组件其实就是表单元素的值不会更新state。输入数据都是现用现取的。</p><p>如下：下面并没有使用state来控制属性，使用的是事件来控制表单的属性值。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Login</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>login</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=nx>event</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span> <span class=c1>//阻止表单提交
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>pwd</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>form</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;http://www.baidu.com&#34;</span> <span class=na>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>login</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>用户名</span><span class=err>：</span><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref </span><span class=o>=</span> <span class=p>{</span><span class=nx>self</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span><span class=nx>self</span> <span class=p>}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;text&#34;</span> <span class=na>name </span><span class=o>=</span><span class=s>&#34;username&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nx>密码</span><span class=err>：</span><span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref </span><span class=o>=</span> <span class=p>{</span><span class=nx>self</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>pwd</span> <span class=o>=</span><span class=nx>self</span> <span class=p>}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;password&#34;</span> <span class=na>name </span><span class=o>=</span><span class=s>&#34;password&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span><span class=nx>登录</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>高级函数</strong></p><p>1.如果函数的参数是函数</p><p>2.如果函数返回一个函数</p><p><strong>函数的珂里化</strong></p><p>通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式</p><p>如下，我们将上面的案例简化，创建高级函数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=kr>class</span> <span class=nx>Login</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>        <span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;&#34;</span><span class=p>,</span><span class=nx>pwd</span><span class=o>:</span><span class=s2>&#34;&#34;</span><span class=p>};</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>				<span class=c1>//返回一个函数
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>saveType</span> <span class=o>=</span> <span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({[</span><span class=nx>type</span><span class=p>]</span><span class=o>:</span><span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>   		<span class=c1>// 不使用珂里化
</span></span></span><span class=line><span class=cl><span class=c1></span>   		<span class=nx>saveXX</span> <span class=o>=</span> <span class=p>(</span><span class=nx>type</span><span class=p>,</span><span class=nx>event</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({[</span><span class=nx>type</span><span class=p>]</span><span class=o>:</span><span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//因为事件中必须是一个函数，所以返回的也是一个函数，这样就符合规范了
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      				<span class=p>&lt;</span><span class=nt>input</span> <span class=na>onChange </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>saveType</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>)}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;text&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>              <span class=p>&lt;</span><span class=nt>input</span> <span class=na>onChange </span><span class=o>=</span> <span class=p>{(</span><span class=nx>event</span><span class=p>)=&gt;{</span><span class=k>this</span><span class=p>.</span><span class=nx>saveXX</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span><span class=nx>event</span><span class=p>)}}</span> <span class=na>type </span><span class=o>=</span> <span class=s>&#34;text&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span><span class=nx>登录</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>Login</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span></code></pre></div><h1 id=生命周期>生命周期</h1><h2 id=旧>（旧）</h2><p>组件从创建到死亡，会经过一些特定的阶段</p><p>​ React组件中包含一系列钩子函数{生命周期回调函数}，会在特定的时刻调用</p><p>​ 我们在定义组件的时候，会在特定的声明周期回调函数中，做特定的工作</p><p>如下图是旧生命周期的结构图：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611490156766.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611490156766.png, ./react%e5%ad%a6%e4%b9%a0/1611490156766.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611490156766.png 2x" data-sizes=auto alt=旧生命周期 title=旧生命周期></p><p>我们通过一个案例更详细的了解这个生命周期：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=kr>class</span> <span class=nx>A</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- constructor&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>num</span><span class=o>:</span><span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>add</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=p>{</span><span class=nx>num</span><span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>num</span><span class=o>:</span><span class=nx>num</span><span class=o>+</span><span class=mi>1</span><span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=c1>//强制更新
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//this.forceUpdate();
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>           <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- render&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>这个是第</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>num</span><span class=p>}</span><span class=nx>个</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>B</span> <span class=na>name </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>num</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick </span><span class=o>=</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>add</span><span class=p>}&gt;</span><span class=nx>点击加一</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=c1>//在render之前执行
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentWillMount</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componentWillMount&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=c1>//在render之后执行
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentDidMount</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componenetDidMount&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=c1>//更新操作 setState之后执行，判断是否可以更新（true可以，false不可以）
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>shouldComponentUpdate</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- shouldComponentUpdate&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=c1>// 组件将要更新之前
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentWillUpdate</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componentWillUpdate&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=c1>//组件更新之后，该函数可以接受相应的参数
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentDidUpdate</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componentDidUpdate&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=c1>//卸载组件之后
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentWillUnmonut</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componentWillUnmonut&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=kr>class</span> <span class=nx>B</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>           <span class=k>return</span><span class=p>(</span>   
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>这个是B组件</span><span class=p>,</span><span class=nx>传递过来的是</span><span class=err>：</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>           <span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>       <span class=c1>//父组件进行了更新，子组件先执行这个【注意，第一次传递数据的时候，并不执行】
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=nx>componentWillReceiveProps</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;A --- componentWillReceiveProps&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>       <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>A</span>   <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>我们在控制台看一下：</p><p>当我们刚刚打开控制台的时候，组件第一次加载：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611568192158.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611568192158.png, ./react%e5%ad%a6%e4%b9%a0/1611568192158.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611568192158.png 2x" data-sizes=auto alt=组件第一次加载 title=组件第一次加载></p><p>当我们点击按钮更新sate的时候：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611568250881.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611568250881.png, ./react%e5%ad%a6%e4%b9%a0/1611568250881.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611568250881.png 2x" data-sizes=auto alt=更新state title=更新state></p><h2 id=新>（新）</h2><p>在最新的react版本中，有些生命周期钩子被抛弃了，在官网中是这样说的：</p><p>我们得到最重要的经验是，过时的组件生命周期往往会带来不安全的编码实践，具体函数如下：</p><ul><li><code>componentWillMount</code></li><li><code>componentWillReceiveProps</code></li><li><code>componentWillUpdate</code></li></ul><p>这些生命周期方法经常被误解和滥用；此外，我们预计，在异步渲染中，它们潜在的误用问题可能更大。我们将在即将发布的版本中为这些生命周期添加 “UNSAFE_” 前缀。（这里的 “unsafe” 不是指安全性，而是表示使用这些生命周期的代码在 React 的未来版本中更有可能出现 bug，尤其是在启用异步渲染之后。）</p><p>由此可见，新版本中并不推荐持有这三个函数，取而代之的是带有UNSAFE_ 前缀的三个函数，比如: UNSAFE_ componentWillMount。即便如此，其实React官方还是不推荐大家去使用，在以后版本中有可能会去除这几个函数。</p><p>如下图是新的生命周期：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611651795885.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611651795885.png, ./react%e5%ad%a6%e4%b9%a0/1611651795885.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611651795885.png 2x" data-sizes=auto alt=新生命周期 title=新生命周期></p><p>从图上可以看出，新生命周期和旧生命周期的区别主要有：</p><p>1.抛弃了上面所说的三个钩子函数【其实还可以使用】</p><p>2.新添加了两个钩子函数</p><p>现在重点说一下，新添加的钩子函数</p><p><strong>static getDerivedStateFromProps(props, state)</strong></p><p>首先，该函数会调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用；该函数必须是静态的；给组件传递的数据（props）以及组件状态（state），会作为参数到这个函数中；该函数也必须有返回值，返回一个Null或者state对象。因为初始化和后续更新都会执行这个方法，因此在这个方法返回state对象，就相当于将原来的state进行了覆盖，所以倒是修改状态不起作用。</p><p><strong>getSnapshotBeforeUpdate(prevProps, prevState)</strong></p><p><code>getSnapshotBeforeUpdate()</code> 在最近一次渲染输出（提交到 DOM 节点）之前调用。它使得组件能在发生更改之前从 DOM 中捕获一些信息（例如，滚动位置）。此生命周期的任何返回值将作为参数传递<code>componentDidUpdate()</code>。</p><blockquote><p>补充一下：componentDidUpdate(prevProps, prevState, snapshot)</p><p>该生命周期函数，可以有三个参数：原始传过来的参数，最开始的状态，getSnapshotBeforeUpdate传递的值</p><p>关于更多关于生命周期的介绍，可以参考官方文档：</p><p><a href=https://zh-hans.reactjs.org/docs/react-component.html#render target=_blank rel="external nofollow noopener noreferrer">https://zh-hans.reactjs.org/docs/react-component.html#render</a></p></blockquote><p>以上就是两个新添加的钩子函数，但是在现实开发中可能并不常用这两个。</p><p>**案例：在一个区域内，定时的输出以行话，如果内容大小超过了区域大小，就出现滚动条，但是内容不进行移动 **</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/BeforeGender.gif data-srcset="./react%e5%ad%a6%e4%b9%a0/BeforeGender.gif, ./react%e5%ad%a6%e4%b9%a0/BeforeGender.gif 1.5x, ./react%e5%ad%a6%e4%b9%a0/BeforeGender.gif 2x" data-sizes=auto alt=案例 title=案例></p><p>如上面的动图：区域内部的内容展现没有变化，但是可以看见滚动条在变化，也就是说上面依旧有内容在输出，只不过不在这个区域内部展现。</p><p><strong>实现：</strong></p><p>【一些css样式，就不在这展示了】</p><p>1.首先我们先实现定时输出内容</p><p>我们可以使用state状态，改变新闻后面的值，但是为了同时显示这些内容，我们应该为state的属性定义一个数组。并在创建组件之后开启一个定时器，不断的进行更新state。更新渲染组件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=kr>class</span> <span class=nx>New</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>num</span><span class=o>:</span><span class=p>[]};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//在组件创建之后,开启一个定时任务
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>componentDidMount</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=nx>setInterval</span><span class=p>(()=&gt;{</span>
</span></span><span class=line><span class=cl>                <span class=kd>let</span> <span class=p>{</span><span class=nx>num</span><span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>news</span> <span class=o>=</span> <span class=p>(</span><span class=nx>num</span><span class=p>.</span><span class=nx>length</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>num</span><span class=o>:</span><span class=p>[</span><span class=nx>news</span><span class=p>,...</span><span class=nx>num</span><span class=p>]});</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span><span class=mi>2000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref </span><span class=o>=</span> <span class=s>&#34;list&#34;</span> <span class=na>className </span><span class=o>=</span> <span class=s>&#34;list&#34;</span><span class=p>&gt;{</span>
</span></span><span class=line><span class=cl>                    <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>num</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>n</span><span class=p>,</span><span class=nx>index</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;news&#34;</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=p>&gt;</span><span class=nx>新闻</span><span class=p>{</span><span class=nx>n</span><span class=p>}&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>})</span>
</span></span><span class=line><span class=cl>                <span class=p>}&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>New</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>2.接下来就是控制滚动条了</p><p>我们在组件渲染到DOM之前获取组件的高度，然后用组件渲染之后的高度减去之前的高度就是一条新的内容的高度，这样在不断的累加到滚动条位置上。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>getSnapshotBeforeUpdate</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>refs</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nx>scrollHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>componentDidUpdate</span><span class=p>(</span><span class=nx>preProps</span><span class=p>,</span><span class=nx>preState</span><span class=p>,</span><span class=nx>height</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>refs</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nx>scrollTop</span> <span class=o>+=</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>refs</span><span class=p>.</span><span class=nx>list</span><span class=p>.</span><span class=nx>scrollHeight</span> <span class=o>-</span> <span class=nx>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>这样就实现了这个功能。</p><h1 id=总结>总结</h1><p>1.初始化阶段:由ReactDoM.render()触发&mdash;初次渲染</p><ul><li><p>constructor()</p></li><li><p>getDerivedStateFromProps</p></li><li><p>render() &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;常用</p></li><li><p>componentDidMount() &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;常用</p></li></ul><p>2.更新阶段:由组件内部this.setSate()或父组件重新render触发</p><ul><li>getDerivedstateFromProps</li><li>shouldComponentUpdate()</li><li>render() &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;常用</li><li>getSnapshotBeforeUpdate</li><li>componentDidUpdate( )</li></ul><p>3.卸载组件:由ReactDOM.unmountComponentAtNode()触发.</p><ul><li>componentWillUnmount() &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;常用</li></ul><h1 id=diff算法>Diff算法</h1><p>提到这个算法，就必须说一下关于Key的事情了。</p><p>其实每个组件中的每个标签都会有一个key,只不过有的必须显示的指定，有的可以隐藏。</p><p>如果生成的render出来后就不会改变里面的内容，那么你不需要指定key（不指定key时，React也会生成一个默认的标识）,或者将index作为key，只要key不重复即可。</p><p>但是如果你的标签是动态的，是有可能刷新的，就必须显示的指定key。必须上面案使用map进行便利的时候就必须指定Key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>num</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>n</span><span class=p>,</span><span class=nx>index</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;news&#34;</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=p>&gt;</span><span class=nx>新闻</span><span class=p>{</span><span class=nx>n</span><span class=p>}&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>这个地方虽然显示的指定了key，但是<strong>官网并不推荐使用Index作为Key去使用</strong>；</p><p>这样会很有可能会有效率上的问题</p><p>举个例子：</p><p>在一个组件中，我们先创建了两个对象，通过循环的方式放入&lt; li>标签中，此时key使用的是index。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>person</span><span class=o>:</span><span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=nx>id</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;张三&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=mi>18</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=nx>id</span><span class=o>:</span><span class=mi>2</span><span class=p>,</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;李四&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=mi>19</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>person</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>preson</span><span class=p>,</span><span class=nx>index</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span>  <span class=p>&lt;</span><span class=nt>li</span> <span class=na>key </span><span class=o>=</span> <span class=p>{</span><span class=nx>index</span><span class=p>}&gt;{</span><span class=nx>preson</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>如下图展现在页面中：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611800406864.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611800406864.png, ./react%e5%ad%a6%e4%b9%a0/1611800406864.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611800406864.png 2x" data-sizes=auto alt=原始对象数组 title=原始对象数组></p><p>此时，我们想在点击按钮之后动态的添加一个对象，并且放入到li标签中，在重新渲染到页面中。</p><p>我们通过修改State来控制对象的添加。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>addObject</span><span class=p>}&gt;</span><span class=nx>点击增加对象</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>addObject</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=p>{</span><span class=nx>person</span><span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=p>{</span><span class=nx>id</span><span class=o>:</span><span class=p>(</span><span class=nx>person</span><span class=p>.</span><span class=nx>length</span><span class=o>+</span><span class=mi>1</span><span class=p>),</span><span class=nx>name</span><span class=o>:</span><span class=s2>&#34;王五&#34;</span><span class=p>,</span><span class=nx>age</span><span class=o>:</span><span class=mi>20</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>person</span><span class=o>:</span><span class=p>[</span><span class=nx>p</span><span class=p>,...</span><span class=nx>person</span><span class=p>]});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>如下动图所示：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/addObject.gif data-srcset="./react%e5%ad%a6%e4%b9%a0/addObject.gif, ./react%e5%ad%a6%e4%b9%a0/addObject.gif 1.5x, ./react%e5%ad%a6%e4%b9%a0/addObject.gif 2x" data-sizes=auto alt=原始对象数组 title=原始对象数组></p><p>这样看，虽然完成了功能。但是其实存在效率上的问题， 我们先来看一下两个前后组件状态的变化：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611800988496.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611800988496.png, ./react%e5%ad%a6%e4%b9%a0/1611800988496.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611800988496.png 2x" data-sizes=auto alt=组件状态的变化 title=组件状态的变化></p><p>我们发现，组件第一个变成了王五，张三和李四都移下去了。因为我们使用Index作为Key，这三个标签的key也就发生了改变【张三原本的key是0，现在变成了1，李四的key原本是1，现在变成了2，王五变成了0】在组件更新状态重新渲染的时候，就出现了问题：</p><p>因为react是通过key来比较组件标签是否一致的，拿这个案例来说：</p><p>首先，状态更新导致组件标签更新，react根据Key，判断旧的虚拟DOM和新的虚拟DOM是否一致</p><p>key = 0 的时候 旧的虚拟DOM 内容是张三 新的虚拟DOM为王五 ，react认为内容改变，从而重新创建新的真实DOM.</p><p>key = 1 的时候 旧的虚拟DOM 内容是李四，新的虚拟DOM为张三，react认为内容改变，从而重新创建新的真实DOM</p><p>key = 2 的时候 旧的虚拟DOM没有，创建新的真实DOM</p><p>这样原本有两个虚拟DOM可以复用，但都没有进行复用，完完全全的都是新创建的；这就导致效率极大的降低。</p><p>其实这是因为我们将新创建的对象放在了首位，如果放在最后其实是没有问题的，但是因为官方并不推荐使用Index作为key值，我们推荐使用id作为key值。从而完全避免这样的情况。</p><p><strong>用index作为key可能会引发的问题:</strong></p><p>1。若对数据进行:逆序添加、逆序删除等破坏顺序操作:</p><p>​ 会产生没有必要的真实DOM更新 界面效果没问题,但效率低。</p><p>2．如果结构中还包含输入类的DOM:</p><p>​ 会产生错误DOM更新 界面有问题。</p><p>3，注意! 如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用index作为key是没有问题的。</p><p><strong>开发如何选择key?</strong></p><p>最好使用每一条数据的唯一标识作为key 比如id，手机号，身份证号</p><p>如果确定只是简单的展示数据，用Index也是可以的</p><p><strong>而这个判断key的比较规则就是Diff算法</strong></p><p>Diff算法其实就是react生成的新虚拟DOM和以前的旧虚拟DOM的比较规则：</p><ul><li><p>如果旧的虚拟DOM中找到了与新虚拟DOM相同的key:</p><ul><li>如果内容没有变化，就直接只用之前旧的真实DOM</li><li>如果内容发生了变化，就生成新的真实DOM</li></ul></li><li><p>如果旧的虚拟DOM中没有找到了与新虚拟DOM相同的key:</p><ul><li>根据数据创建新的真实的DOM,随后渲染到页面上</li></ul></li></ul><h1 id=react脚手架>React脚手架</h1><p>react提供了一个用于创建react项目的脚手架库：create-react-app</p><h2 id=创建项目并启动>创建项目并启动</h2><p>1.全局安装：npm i -g create-react-app</p><p>2.创建项目：create-react-app 项目名</p><p>在这一步，有可能会出现：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611803687193.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611803687193.png, ./react%e5%ad%a6%e4%b9%a0/1611803687193.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611803687193.png 2x" data-sizes=auto alt=不是内部命令 title=不是内部命令></p><p>这样可以直接使用：npx create-react-app 项目名</p><p>3.等待下载完成，进入项目文件夹，运行一下</p><p>比如，我这的项目名称是hello,就先进入hello文件夹</p><p>cd hello</p><p>npm start //启动这个项目</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611816095069.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611816095069.png, ./react%e5%ad%a6%e4%b9%a0/1611816095069.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611816095069.png 2x" data-sizes=auto alt=启动成功 title=启动成功></p><p>这个时会自动的打开浏览器，展现这个项目：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611816150630.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611816150630.png, ./react%e5%ad%a6%e4%b9%a0/1611816150630.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611816150630.png 2x" data-sizes=auto alt=第一个脚手架项目 title=第一个脚手架项目></p><h2 id=项目的目录结构>项目的目录结构</h2><p>我们先来看一下public这个目录下面的结构：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611817630266.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611817630266.png, ./react%e5%ad%a6%e4%b9%a0/1611817630266.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611817630266.png 2x" data-sizes=auto alt=public title=public></p><p>这里面最主要的还是这个Index.html文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=o>&lt;!</span><span class=nx>DOCTYPE</span> <span class=nx>html</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=o>%</span><span class=nx>PUBLIC_URL</span><span class=o>%</span><span class=nx>表示public文件夹的路径</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;icon&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;%PUBLIC_URL%/favicon.ico&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=nx>用于开启理想视口</span><span class=err>，</span><span class=nx>用于移动端页面的适配</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=nx>用于配置浏览器地址栏的颜色</span><span class=err>（</span><span class=nx>仅支持安卓手机浏览器</span><span class=err>）</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;theme-color&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;#000000&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=nx>描述网页信息的</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span>
</span></span><span class=line><span class=cl>      <span class=na>name</span><span class=o>=</span><span class=s>&#34;description&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>content</span><span class=o>=</span><span class=s>&#34;Web site created using create-react-app&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=nx>用于指定网页添加到手机主屏幕后的图标</span><span class=err>（</span><span class=nx>仅仅支持ios</span><span class=err>）</span><span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;apple-touch-icon&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;%PUBLIC_URL%/logo192.png&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span><span class=nx>应用加壳时候的配置文件</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;manifest&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;%PUBLIC_URL%/manifest.json&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span><span class=nx>React</span> <span class=nx>App</span><span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>浏览器不支持JS的运行的时候展现</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;</span><span class=nx>You</span> <span class=nx>need</span> <span class=nx>to</span> <span class=nx>enable</span> <span class=nx>JavaScript</span> <span class=nx>to</span> <span class=nx>run</span> <span class=k>this</span> <span class=nx>app</span><span class=p>.&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;root&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>src文件：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=./react%e5%ad%a6%e4%b9%a0/1611818262317.png data-srcset="./react%e5%ad%a6%e4%b9%a0/1611818262317.png, ./react%e5%ad%a6%e4%b9%a0/1611818262317.png 1.5x, ./react%e5%ad%a6%e4%b9%a0/1611818262317.png 2x" data-sizes=auto alt=src文件 title=src文件></p><p>这里面其实最主要的就是App.js以及index.js，一个是组件，一个是将组件渲染到页面中的。</p><h2 id=第一个脚手架应用>第一个脚手架应用</h2><p>1.我们保持public中的Index.html不变</p><p>2.修改src下面的APP.js以及index.js文件</p><p>App.js: 【注意：创建好的组件一定要暴露出去】</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>//创建外壳组件APP
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>App</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>Hello</span> <span class=nx>word</span><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>App</span>
</span></span></code></pre></div><p>index.js: 【主要的作用其实就是将App这个组件渲染到页面上】</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=c1>//引入核心库
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ReactDOM</span> <span class=nx>from</span> <span class=s1>&#39;react-dom&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>//引入组件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>App</span> <span class=nx>from</span> <span class=s1>&#39;./App&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>App</span> <span class=p>/&gt;,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;root&#34;</span><span class=p>))</span>
</span></span></code></pre></div><p>这样在重新启动应用，就成功了。</p><p>我们也不建议这样直接将内容放入App组件中，尽量还是用内部组件。</p><p>我们定义一个Hello组件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,{</span><span class=nx>Componet</span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kr>class</span> <span class=nx>Hello</span> <span class=kr>extends</span> <span class=nx>Componet</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>在App组件中，进行使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kr>class</span> <span class=nx>App</span> <span class=kr>extends</span> <span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>Hello</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>这样的结果和前面是一样的。</p><p>但是由于普通的Js和组件都是js，所一最好组件使用jsx去展示。</p><h2 id=样式冲突>样式冲突</h2><p>当组件逐渐增多起来的时候，我们发现，组件的样式也是越来越丰富，这样就很有可能产生两个组件中样式名称有可能会冲突，这样会根据引入App这个组件的先后顺序，后面的会覆盖前面的，</p><p>为了避免这样的样式冲突，我们采用下面的形式：</p><p>1.将css文件名修改： hello.css &mdash; >hello.module.css</p><p>2.引入并使用的时候改变方式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,{</span><span class=nx>Component</span><span class=p>}</span><span class=nx>from</span> <span class=s1>&#39;react&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>hello</span> <span class=nx>from</span> <span class=s1>&#39;./hello.module.css&#39;</span>  <span class=c1>//引入的时候给一个名称
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kr>class</span> <span class=nx>Hello</span> <span class=kr>extends</span> <span class=nx>Component</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>className</span><span class=o>=</span><span class=p>{</span><span class=nx>hello</span><span class=p>.</span><span class=nx>title</span><span class=p>}&gt;</span><span class=nx>Hello</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>   <span class=c1>//通过大括号进行调用
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=功能界面的组件化编码流程>功能界面的组件化编码流程</h1><p>1.拆分组件:拆分界面，抽取组件</p><p>2.实现静态组件</p><p>3.实现动态组件</p><ul><li>动态的显示初始化数据<ul><li>数据类型</li><li>数据名称</li><li>保存在哪个组件</li></ul></li><li>交互</li></ul><p><strong>注意事项：</strong></p><p>1.拆分组件、实现静态组件。注意className、style的写法</p><p>2.动态初始化列表，如何确定将数据放在哪个组件的state中？</p><ul><li>某个组件使用：放在自身的state中</li><li>某些组件使用：放在他们共同的父组件中【状态提升】</li></ul><p>3.关于父子组件之间的通信</p><ul><li>父组件给子组件传递数据：通过props传递</li><li>子组件给父组件传递数据：通过props传递，要求父组件提前给子组件传递一个函数</li></ul><p>4.注意defaultChecked 和checked区别，defalutChecked只是在初始化的时候执行一次，checked没有这个限制，但是必须添加onChange方法类似的还有：defaultValue 和value</p><p>5.状态在哪里，操作状态的方法就在哪里</p><h1 id=react-ajax>react ajax</h1><p>React本身只关注与页面，并不包含发送ajax请求的代码，所以一般都是集成第三方的一些库，或者自己进行封装。</p><p>推荐使用axios。</p><p>在使用的过程中很有可能会出现跨域的问题，这样就应该配置代理。</p><p>所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）， 当一个请求url的<strong>协议、域名、端口</strong>三者之间任意一个与当前页面url不同即为跨域 。</p><p>那么react通过代理解决跨域问题呢</p><p><strong>方法一</strong></p><blockquote><p>在package.json中追加如下配置</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;proxy&#34;</span><span class=err>:</span><span class=s2>&#34;请求的地址&#34;</span>      <span class=s2>&#34;proxy&#34;</span><span class=err>:</span><span class=s2>&#34;http://localhost:5000&#34;</span>  
</span></span></code></pre></div><p>说明：</p><ol><li>优点：配置简单，前端请求资源时可以不加任何前缀。</li><li>缺点：不能配置多个代理。</li><li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）</li></ol><p><strong>方法二</strong></p><ol><li><p>第一步：创建代理配置文件</p><pre tabindex=0><code>在src下创建配置文件：src/setupProxy.js
</code></pre></li><li><p>编写setupProxy.js配置具体代理规则：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>proxy</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;http-proxy-middleware&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>app</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>proxy</span><span class=p>(</span><span class=s1>&#39;/api1&#39;</span><span class=p>,</span> <span class=p>{</span>  <span class=c1>//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;http://localhost:5000&#39;</span><span class=p>,</span> <span class=c1>//配置转发目标地址(能返回数据的服务器地址)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>//控制服务器接收到的请求头中host字段的值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>      	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000
</span></span></span><span class=line><span class=cl><span class=cm>      	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000
</span></span></span><span class=line><span class=cl><span class=cm>      	changeOrigin默认值为false，但我们一般将changeOrigin值设为true
</span></span></span><span class=line><span class=cl><span class=cm>      */</span>
</span></span><span class=line><span class=cl>      <span class=nx>pathRewrite</span><span class=o>:</span> <span class=p>{</span><span class=s1>&#39;^/api1&#39;</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>}</span> <span class=c1>//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>proxy</span><span class=p>(</span><span class=s1>&#39;/api2&#39;</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;http://localhost:5001&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>pathRewrite</span><span class=o>:</span> <span class=p>{</span><span class=s1>&#39;^/api2&#39;</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ol><p>说明：</p><ol><li>优点：可以配置多个代理，可以灵活的控制请求是否走代理。</li><li>缺点：配置繁琐，前端请求资源时必须加前缀。</li></ol><h1 id=兄弟之间进行通信>兄弟之间进行通信</h1><p>这就要借助消息订阅和发布机制。</p><p>举个例子来说就是张三想要跟李四进行通信，张三就需要订阅一个消息【比如A消息】，李四想要给张三数据，就必须发布一个A消息，在发布的同时将数据放入消息中，因为张三订阅了名称为A的消息，此时就能接受到李四发布的消息，从而获取到数据。</p><p>这就有点类似于看报纸，甲想要知道每天都发生什么事情，于是订阅了每天日报，乙每天都会发布这个每天日报，因为甲订阅了，于是乙就会每天就给甲方推送，甲方从而获取数据。</p><p><strong>在消息订阅和发布中，我们可以使用PubSubJs进行通信：</strong></p><p>引入PubSubJs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PubSub</span> <span class=nx>from</span> <span class=s1>&#39;pubsub-js&#39;</span>
</span></span></code></pre></div><p>订阅消息：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>PubSub</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s2>&#34;getSate&#34;</span><span class=p>,(</span><span class=nx>_</span><span class=p>,</span><span class=nx>data</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nx>PubSub</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s2>&#34;订阅的消息名称&#34;</span><span class=p>,</span><span class=nx>回调函数</span><span class=err>，</span><span class=nx>第一个参数是消息名称</span><span class=err>，</span><span class=nx>可以使用_来占位</span><span class=err>，</span><span class=nx>第二个是传递的数据</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span></code></pre></div><p>发布消息：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>PubSub</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=s2>&#34;getSate&#34;</span><span class=p>,{</span><span class=nx>isFrist</span><span class=o>:</span><span class=kc>false</span><span class=p>,</span><span class=nx>isLoad</span><span class=o>:</span><span class=kc>true</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nx>PubSub</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=s2>&#34;订阅的消息名称&#34;</span><span class=p>,</span><span class=nx>传递的数据</span><span class=p>)</span>
</span></span></code></pre></div><h1 id=async和await>async和await</h1><p><strong>async:</strong></p><p>该关键字是放在函数之前的，使得函数成为一个异步函数，他最大的特点就是将函数回封装成Promise，也就是被他修饰的函数的返回值都是Promise对象。而这个Promise对象的状态则是由函数执行的返回值决定的。</p><p>如果返回的是一个非promise对象，该函数将返回一个成功的Promise，成功的值则是返回的值；</p><p>如果返回的是一个promise对象，则该函数返回的就是该promise对应的状态。</p><p><strong>await</strong></p><p>await右边是一个表达式，如果该表达式返回的是一个Promise对象，则左边接收的结果就是该Promise对象成功的结果，如果该Promise对象失败了，就必须使用try..catch来捕获。如果该表达式返回的是是一个不是promise对象，则左边接受的就是该表达式的返回值。</p><p>当 <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await target=_blank rel="external nofollow noopener noreferrer">await</a> 关键字与异步函数一起使用时，它的真正优势就变得明显了 —— 事实上， <strong>await 只在异步函数里面才起作用</strong>。它可以放在任何异步的，基于 promise 的函数之前。它会暂停代码在该行上，直到 promise 完成，然后返回结果值。在暂停的同时，其他正在等待执行的代码就有机会执行了。</p><p>举个例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=nx>f1</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span><span class=nx>reject</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// resolve(1);
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>reject</span><span class=p>(</span><span class=s2>&#34;错误&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=kd>function</span> <span class=nx>test</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span>  <span class=kr>await</span> <span class=nx>f1</span><span class=p>();</span>
</span></span><span class=line><span class=cl>           <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span><span class=k>catch</span><span class=p>(</span><span class=nx>error</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>test</span><span class=p>();</span>
</span></span></code></pre></div><h1 id=fetch>fetch</h1><p>以前发送请求，使用ajax或者axios，现在还可以使用fetch。这个是window自带的，和xhr是一个级别的。</p><p>可以查看这个文章，写的真的不错：</p><p><a href=http://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html target=_blank rel="external nofollow noopener noreferrer">fetch</a></p><h1 id=react路由>React路由</h1><h2 id=spa>SPA</h2><p>单页Web应用(single page web application，SPA)。整个应用只有一个完整的页面。</p><p>点击页面中的链接不会刷新页面，只会做页面的局部更新。</p><p>数据都需要通过ajax请求获取,并在前端异步展现</p><h2 id=什么是路由>什么是路由</h2><p>一个路由其实就是一个映射关系（k:v）</p><p>key为路径，value可能是function 或者是 component</p><p><strong>后端路由：</strong></p><p>value是function，用来处理客户端提交的请求</p><p>注册路由：router.get(path,function(req,res))</p><p>工作过程：当node接收一个请求的时候，根据请求路径找到匹配的路由，调用路由中的函数来处理请求，返回响应的数据</p><p><strong>前端路由：</strong></p><p>浏览器端路由，value是Component，用于展示页面内容</p><p>注册路由：&lt; Route path="/test" component={Test}></p><p>工作过程：当浏览器的path变为/test的时候，当前路由组件就会变成Test组件</p><p><strong>前端路由的原理</strong></p><p>这个主要是依靠于history，也就是浏览器的历史记录。</p><p>浏览器上的记录其实就是一个栈，前进一次就是入栈，后退一次就是出栈。</p><p>并且历史记录上有一个监听的方法，可以时时刻刻监听记录的变化。从而判断是否改变路径</p><p><a href=https://developer.mozilla.org/zh-CN/docs/Web/API/History target=_blank rel="external nofollow noopener noreferrer">History</a></p><h2 id=react-router-dom>react-router-dom</h2><p>react的路由有三类：</p><p>web【主要适用于前端】,native【主要适用于本地】,anywhere【任何地方】</p><p>在这主要使用web也就是这个标题 react-router-dom</p><p><strong>基本的使用：</strong></p><p>导航中的a标签改写成Link标签</p><p>&lt; Link to="/路径" >xxx&lt; /Link></p><p>展示区写Route标签进行路径的匹配</p><p>&lt; Route path = &lsquo;/路径&rsquo; component={组件名称}></p><p>&lt; App>最外侧包裹了一个&lt; BrowserRouter>或者&lt; HashRouter></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Link</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group-item&#34;</span>  <span class=na>to</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=p>&gt;</span><span class=nx>About</span><span class=p>&lt;/</span><span class=nt>Link</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Link</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group-item&#34;</span>  <span class=na>to</span><span class=o>=</span><span class=s>&#34;/home&#34;</span><span class=p>&gt;</span><span class=nx>Home</span><span class=p>&lt;/</span><span class=nt>Link</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;panel-body&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=cm>/* 注册路由，也就是写对应的关系 */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>About</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span><span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>index</span><span class=p>.</span><span class=nx>js</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>BrowserRouter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>App</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>BrowserRouter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>,</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;root&#34;</span><span class=p>))</span>
</span></span></code></pre></div><p>那么使用Link代替a标签之后，在页面上会是什么呢，我们发现其实页面上也是把link转化为了a标签</p><p><strong>路由组件以及一般组件</strong></p><p>1.写法不一样</p><p>一般组件：&lt; Demo></p><p>路由组件：&lt; Route path="/demo" component ={Demo}/></p><p>2.存放的位置一般不同</p><p>一般组件：components</p><p>路由组件：pages</p><p>3.接收的内容【props】</p><p>一般组件：写组件标签的时候传递什么，就能收到什么</p><p>路由组件：接收到三个固定的属性【history,location,match】</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>history</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=nx>go</span><span class=o>:</span> <span class=nx>ƒ</span> <span class=nx>go</span><span class=p>(</span><span class=nx>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>goBack</span><span class=o>:</span> <span class=nx>ƒ</span> <span class=nx>goBack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>goForward</span><span class=o>:</span> <span class=nx>ƒ</span> <span class=nx>goForward</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>push</span><span class=o>:</span> <span class=nx>ƒ</span> <span class=nx>push</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>replace</span><span class=o>:</span> <span class=nx>ƒ</span> <span class=nx>replace</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>state</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>location</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=nx>pathname</span><span class=o>:</span> <span class=s2>&#34;/about&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>search</span><span class=o>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>state</span><span class=o>:</span> <span class=kc>undefined</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>match</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=nx>params</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/about&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span><span class=o>:</span> <span class=s2>&#34;/about&#34;</span>
</span></span></code></pre></div><p><strong>NavLink</strong></p><p>因为Link不能够改变标签体，因此只适合用于一些写死的标签。而如果想要有一些点击的效果，使用NavLink.</p><p>如下代码，就写了ctiveClassName，当点击的时候就会触发这个class的样式</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>{</span><span class=cm>/*NavLink在点击的时候就会去找activeClassName=&#34;ss&#34;所指定的class的值，如果不添加默认是active
</span></span></span><span class=line><span class=cl><span class=cm> 这是因为Link相当于是把标签写死了，不能去改变什么。*/</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>NavLink</span>  <span class=na>activeClassName</span><span class=o>=</span><span class=s>&#34;ss&#34;</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group-item&#34;</span>  <span class=na>to</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=p>&gt;</span><span class=nx>About</span><span class=p>&lt;/</span><span class=nt>NavLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>NavLink</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group-item&#34;</span>  <span class=na>to</span><span class=o>=</span><span class=s>&#34;/home&#34;</span><span class=p>&gt;</span><span class=nx>Home</span><span class=p>&lt;/</span><span class=nt>NavLink</span><span class=p>&gt;</span> 
</span></span></code></pre></div><p>但是可能一个导航又很多标签，如果这样重复的写NavLink也会造成很多的重复性的代码问题。</p><p>因此可以自定义一个NavLink：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=c1>// 通过{...对象}的形式解析对象，相当于将对象中的属性全部展开
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=c1>//&lt;NavLink  to = {this.props.to} children = {this.props.children}/&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>NavLink</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;list-group-item&#34;</span> <span class=p>{</span><span class=na>...this.props</span><span class=p>}/&gt;</span>
</span></span></code></pre></div><p>​ 在使用的时候：直接写每个标签中不一样的部分就行，比如路径和名称</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>{</span><span class=cm>/*将NavLink进行封装，成为MyNavLink,通过props进行传参数，标签体内容props是特殊的一个属性，叫做children */</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyNavLink</span> <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/about&#34;</span> <span class=p>&gt;</span><span class=nx>About</span><span class=p>&lt;/</span><span class=nt>MyNavLink</span><span class=p>&gt;</span>
</span></span></code></pre></div><p><strong>switch</strong></p><p>注册路由存在多个的时候，会不断的去匹配，直到最后一个，存在效率问题，所以需要用 标签进行包裹一层，这样的话，只要匹配到一个就不会继续往下匹配了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>Switch</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/home&#34;</span> <span class=nx>componenet</span><span class=o>=</span><span class=p>{</span><span class=nx>aa</span><span class=p>}</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/home&#34;</span> <span class=nx>componenet</span><span class=o>=</span><span class=p>{</span><span class=nx>bb</span><span class=p>}</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/Switch&gt;</span>
</span></span></code></pre></div><ol><li>通常情况下，path和component是一一对应关系。</li><li>Switch可以提高理由匹配效率（单一匹配）</li></ol><h2 id=样式错误>样式错误</h2><p>但是在写路由的时候，有的时候就会出现多级目录，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyNavLink</span> <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/cyk/about&#34;</span> <span class=p>&gt;</span><span class=nx>About</span><span class=p>&lt;/</span><span class=nt>MyNavLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/cyk/about&#34;</span><span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>About</span><span class=p>}/&gt;</span>
</span></span></code></pre></div><p>这个时候就在刷新页面，就会出现问题：</p><p>样式因为路径问题加载失败，此时页面返回public下面的Index.html</p><p>解决这个问题，有三个方法：</p><p>1.样式加载使用绝对位置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/css/bootstrap.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span><span class=p>&gt;</span> 
</span></span></code></pre></div><p>2.使用 %PUBLIC_URL%</p><pre tabindex=0><code> &lt;link href=&#34;%PUBLIC_URL%/css/bootstrap.css&#34; rel=&#34;stylesheet&#34;&gt;
</code></pre><p>3.使用HashRouter</p><p>因为HashRouter会添加#，默认不会处理#后面的路径，所以也是可以解决的</p><h2 id=模糊匹配和精准匹配>模糊匹配和精准匹配</h2><p>react默认是开启模糊匹配的。</p><p>比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyNavLink</span> <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/home/a/b&#34;</span> <span class=p>&gt;</span><span class=nx>Home</span><span class=p>&lt;/</span><span class=nt>MyNavLink</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>此时该标签匹配的路由，分为三个部分 home a b；将会根据这个先后顺序匹配路由。</p><p>如下就可以匹配到相应的路由：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span><span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span></code></pre></div><p>但是如果是下面这个就会失败，也就是说他是根据路径一级一级查询的，可以包含前面那一部分，但并不是只包含部分就可以。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/a&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span></code></pre></div><p>当然也可以使用这个精确的匹配 exact={true}</p><p>如以下：这样就精确的匹配/home，则上面的/home/a/b就不行了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span> <span class=na>exact</span><span class=o>=</span><span class=p>{</span><span class=kc>true</span><span class=p>}</span>  <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>或者</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span> <span class=na>exact</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span></code></pre></div><p>​</p><h2 id=初始化路由>初始化路由</h2><p>在配置好路由，最开始打开页面的时候，应该是不会匹配到任意一个组件。这个时候页面就显得极其不合适，此时应该默认的匹配到一个组件。</p><p>此时就需要使用Redirect进行默认匹配了。如下的代码就是默认匹配/home路径所到的组件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Switch</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path</span><span class=o>=</span><span class=s>&#34;/about&#34;</span><span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>About</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=cm>/* exact={true}：开启严格匹配的模式，路径必须一致 */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Route</span>   <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=cm>/* Redirect:如果上面的都没有匹配到，就匹配到这个路径下面 */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Redirect</span>  <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/home&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>Switch</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>简单来说就是在一个路由组件中又使用了一个路由，就形成了嵌套路由。</p><p>举个例子来说：</p><p>我们在home这个路由组件中又添加两个组件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-react data-lang=react><span class=line><span class=cl><span class=nx>APP</span><span class=p>.</span><span class=nx>jsx</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Route</span>   <span class=na>path</span><span class=o>=</span><span class=s>&#34;/home&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}/&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>Home</span><span class=p>.</span><span class=nx>jsx</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ul</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;nav nav-tabs&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    	<span class=p>&lt;</span><span class=nt>MyNavLink</span> <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/home/news&#34;</span><span class=p>&gt;</span><span class=nx>News</span><span class=p>&lt;/</span><span class=nt>MyNavLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    	<span class=p>&lt;</span><span class=nt>MyNavLink</span>  <span class=na>to </span><span class=o>=</span> <span class=s>&#34;/home/message&#34;</span><span class=p>&gt;</span><span class=nx>Message</span><span class=p>&lt;/</span><span class=nt>MyNavLink</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Switch</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path </span><span class=o>=</span> <span class=s>&#34;/home/news&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>News</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Route</span> <span class=na>path </span><span class=o>=</span> <span class=s>&#34;/home/message&#34;</span> <span class=na>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Message</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Redirect</span> <span class=na>to</span><span class=o>=</span><span class=s>&#34;/home/message&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Switch</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>react中路由的注册是有顺序的，因此在匹配的时候也是按照这个顺序进行的，因此会先匹配父组件中的路由</p><p>比如上面的 /home/news的路由处理过程：</p><p>1.因为父组件home的路由是先注册的，因此在匹配的时候先去找home的路由，也就是根据/home/news先模糊匹配到/home</p><p>2.在去Home组件里面去匹配相应的路由，从而找到了/home/news进行匹配，因此找到了News组件。</p><p>但是如果开启精确匹配，就会在第一步的时候卡住，这个时候就走不下去了。<strong>因此不要轻易的使用精确匹配</strong></p><h2 id=嵌套路由>嵌套路由</h2><ol><li>注册子路由时要写上父路由的path值</li><li>路由的匹配是按照注册路由的顺序进行的</li></ol><p>父路由</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c>&lt;!--</span><span class=nx>App</span><span class=p>.</span><span class=nx>jsx</span><span class=o>--&gt;</span>		
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;row&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;col-xs-2 col-xs-offset-2&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;list-group&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>MyNavLink</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;/about&#34;</span><span class=o>&gt;</span><span class=nx>About</span><span class=o>&lt;</span><span class=err>/MyNavLink&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>MyNavLink</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;/home&#34;</span><span class=o>&gt;</span><span class=nx>Home</span><span class=o>&lt;</span><span class=err>/MyNavLink&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;col-xs-6&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;panel&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>className</span><span class=o>=</span><span class=s2>&#34;panel-body&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/about&#34;</span> <span class=nx>component</span><span class=o>=</span><span class=p>{</span><span class=nx>About</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s2>&#34;/home&#34;</span> <span class=nx>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Home</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>Redirect</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;/about&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span></code></pre></div><p>子路由</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>ul</span> <span class=nx>className</span><span class=o>=</span><span class=s1>&#39;nav nav-tabs&#39;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>MyNavLink</span> <span class=nx>to</span><span class=o>=</span><span class=s1>&#39;/home/news&#39;</span><span class=o>&gt;</span><span class=nx>News</span><span class=o>&lt;</span><span class=err>/MyNavLink&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=o>&lt;</span><span class=nx>MyNavLink</span> <span class=nx>to</span><span class=o>=</span><span class=s1>&#39;/home/message&#39;</span><span class=o>&gt;</span><span class=nx>Message</span><span class=o>&lt;</span><span class=err>/MyNavLink&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=err>/ul&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>Switch</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s1>&#39;/home/news&#39;</span> <span class=nx>component</span><span class=o>=</span><span class=p>{</span><span class=nx>News</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Route</span> <span class=nx>path</span><span class=o>=</span><span class=s1>&#39;/home/message&#39;</span> <span class=nx>component</span><span class=o>=</span><span class=p>{</span><span class=nx>Message</span><span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Redirect</span> <span class=nx>to</span><span class=o>=</span><span class=s2>&#34;/home/news&#34;</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/Switch&gt;</span>
</span></span></code></pre></div><h2 id=向路由组件传递参数>向路由组件传递参数</h2><ol><li><p>params参数</p><ol><li>路由链接（携带参数）：&lt;Link to={<code>/home/message/${message.id}/${message.info}</code>}>{message.info}</li><li>注册路由：</li><li>接收参数：const { id, title } = this.props.match.params;</li></ol></li><li><p>search参数</p><ol><li>路由链接（携带参数）：&lt;Link to={<code>/home/news?id=${news.id}&amp;info=${news.info}</code>}>{news.info}</li><li>注册路由（无需声明，正常注册）：</li><li>接收参数：const { id, info } = qs.parse(this.props.location.search.slice(1));</li><li>备注：接收到的参数为?id=1&amp;name=&lsquo;xxx&rsquo;，需要借助querystring组件进行解析</li></ol></li><li><p>state参数</p><ol><li>路由链接（携带参数）：&lt;Link to={{ pathname: &lsquo;/home/info/detail&rsquo;, state: { id: message.id, info: message.info } }}>{message.info}</li><li>注册路由（无需声明，正常注册）：</li><li>接收参数：this.props.location.state</li><li>备注：刷新也可以保留住参数</li></ol></li></ol><h2 id=编程式路由导航>编程式路由导航</h2><p>借助this.props.history对象上的API对操作的路由跳转，前进，后退</p><ol><li>push方式：this.props.history.push(<code>/home/message/detail/${id}/${info}</code>);支持params，search，state三种参数形式</li><li>replace方式：this.props.history.replace(<code>/home/message/detail/${id}/${info}</code>);支持params，search，state三种参数形式</li><li>goBack：this.props.history.goBack()</li><li>goForward：this.props.history.goForward()</li><li>go：this.props.history.go()</li></ol><h2 id=withrouter最用>withRouter最用</h2><p>如果不是路由组件的话，是不会带有this.props.history/match/&mldr; 属性的，这时候需要用withRouter包裹一下，这样就把一般组件加工了一下，使其拥有路由组件所特有的API属性</p><ol><li>import {withRouter} from &lsquo;react-router-dom&rsquo;</li><li>export default Router(XXX组件)</li></ol><h2 id=browserrouter-和hashrouter区别>BrowserRouter 和HashRouter区别</h2><ol><li>底层原理不一样：<ol><li>BrowserRouter使用的是H5的history API，不兼容IE9及以下版本。</li><li>HashRouter使用的是URL的哈希值。</li></ol></li><li>url表现形式不一样<ol><li>BrowserRouter的路径中没有#，例如：localhost:3000/demo/test</li><li>HashRouter的路径中包含#，例如：localhost:3000/#/demo/test</li></ol></li><li>刷新后对路由的state参数的影响<ol><li>BrowserRouter没有任何影响，因为state保存在history对象中。</li><li>HashRouter刷新后会导致路由state参数的丢失</li></ol></li><li>备注：HashRouter可以用于解决一些路径错误相关的问题</li></ol><h1 id=redux>Redux</h1><h2 id=redux是什么>redux是什么</h2><ol><li>redux是一个专门用于做状态管理的JS库（不是react插件库）</li><li>它可以用在react,angular,vue等项目中，但基本与react配合使用</li><li>作用：集中式管理react应用中多个组件共享的状态</li></ol><h2 id=什么情况下需要使用redux>什么情况下需要使用redux</h2><ol><li>某个组件的状态需要让其他组件可以随时拿到（共享）</li><li>一个组件需要改变另一个组件的状态（通信）</li><li>总体原则：能不用就不用，如果不用比较吃力才考虑实用</li></ol><h3 id=redux的三个核心概念>redux的三个核心概念</h3><h4 id=action>action</h4><ol><li>动作的对象</li><li>包含2个属性<ol><li>type：标识属性，值为字符串，唯一，必要属性</li><li>data：数据属性，值类型任意，可选属性</li></ol></li><li>例子：{type:&lsquo;ADD_STUDENT&rsquo;,data:{name:&lsquo;xx&rsquo;,age:18}}</li></ol><h4 id=reducer>reducer</h4><ol><li>用于初始化状态，加工状态</li><li>加工时，根据旧的state和action，产生新的state的纯函数。</li></ol><h4 id=stroe>stroe</h4><ol><li>将state，action，reducer联系在一起的对象</li><li>如何得到此对象<ol><li>import {createStore} from &lsquo;redux&rsquo;</li><li>import reducer from &lsquo;./reducers&rsquo;</li><li>const store = createStore(reducer)</li></ol></li><li>此对象的功能？<ol><li>getState()：得到state</li><li>dispatch(action)：分发action，触发reducer调用，产生新的state</li><li>subscribe(listener)：注册监听，当产生了新的state时，自动调用</li></ol></li></ol><h3 id=react-redux使用>react-redux使用</h3><ol><li>明确2个概念：<ol><li>UI组件：不能使用任何redux的api，只负责页面的呈现，交互等。</li><li>容器组件：负责和redux通信，将结果交给UI组件</li></ol></li><li>如何创建一个容器组件&mdash;&mdash;靠react-redux的connect函数<ol><li>connect(mapStateToProps,mapDispatchToProps)(UI组件)<ul><li>mapStateToProps：映射状态，返回值是一个对象</li><li>mapDispatchToProps：映射操作状态的方法，返回值是一个对象</li></ul></li></ol></li><li>备注1：容器组件中的store是靠props传进去的，而不是在容器组件中直接引入</li><li>备注2：mapDispatchToProps也可以只是一个对象</li></ol><h3 id=扩展点>扩展点</h3><h4 id=setstate>setState</h4><ol><li>setState(stateChange,[callback]) &mdash;&mdash;-对象式的setState<ol><li>stateChange为状态改变对象（该对象可以体现出状态的更改）</li><li>callback是可选的回调函数，它在状态更新完毕，界面也更新后（render调用后）才被调用</li></ol></li><li>setState(updater,[callback])&mdash;&ndash;函数式的setState<ol><li>updater为返回stateChange对象的函数，可以接收到state和props</li><li>callback是可选的回调函数，它在状态更新完毕，界面也更新后（render调用后）才被调用</li></ol></li></ol><p>总结：</p><pre><code>	1. 对象式的setState是函数式的setState的简写方式（语法糖）
	2. 使用原则：
   		1. 如果新状态不依赖于原状态 ===》使用对象方式
   		2. 如果新状态依赖于原状态===》使用函数方式
   		3. 如果需要再setState()执行后获取最新的状态数据，要在第二个callback函数中读取
</code></pre><h4 id=lazyload>lazyLoad</h4><p>路由组件的lazyLoad</p><pre tabindex=0><code>//1.通过React的lazy函数配合import()函数动态加载路由组件 ===》 路由组件代码会被分开打包
const Login = lazy(()=&gt;import(&#39;./xx/xx&#39;)) // 要延迟加载的组件

//2.通过&lt;Suspense&gt;指定在加载得到路由打包文件前显示一个自定义loading界面
&lt;Suspense fallback={&lt;h1&gt;loading...&lt;/h1&gt;}
	&lt;Switch&gt;
			&lt;Route path=&#39;/xxx&#39; component={Xxxx}/&gt;
			&lt;Redirect to=&#34;/logion&#34;/&gt;
&lt;/Suspense&gt;
</code></pre></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2021-01-20 11:13:20">更新于 2021-01-20&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/prettier%E9%85%8D%E7%BD%AE/ class=post-nav-item rel=prev title><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i></a>
<a href=/posts/%E8%A7%84%E8%8C%83%E6%96%87%E6%A1%A3/ class=post-nav-item rel=next title=规范文档>规范文档<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.111.3">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.17"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/></a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><div id=mask></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:50},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script src=/js/theme.min.js defer></script></body></html>